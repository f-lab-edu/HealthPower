groups:
  - name: service-alerts
    rules:
      - alert: AppDown
        expr: up{job="spring-boot-app"} == 0
        for: 30s
        labels:
          severity: critical
        annotations:
          summary: "âŒ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‹¤ìš´"
          description: "Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸ìŠ¤í„´ìŠ¤ê°€ êº¼ì ¸ ìˆìŠµë‹ˆë‹¤. (instance={{ $labels.instance }})"

      - alert: HighJvmHeapUsage
        expr: jvm_memory_used_bytes{area="heap"} / jvm_memory_max_bytes{area="heap"} > 0.8
        for: 1m
        labels:
          severity: warning
        annotations:
          summary: "âš ï¸ JVM Heap ì‚¬ìš©ë¥  80% ì´ˆê³¼"
          description: "í˜„ì¬ Heap ì‚¬ìš©ëŸ‰ì´ 80%ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. (instance={{ $labels.instance }})"

      - alert: HighHttp5xxRate
        expr: |
          rate(http_server_requests_seconds_count{status=~"5.."}[1m])
          /
          rate(http_server_requests_seconds_count[1m]) > 0.2
        for: 30s
        labels:
          severity: warning
        annotations:
          summary: "ğŸš¨ 5xx ì˜¤ë¥˜ ë¹„ìœ¨ ì¦ê°€"
          description: "ìµœê·¼ 1ë¶„ ë™ì•ˆ 5xx ì˜¤ë¥˜ê°€ ì „ì²´ ìš”ì²­ì˜ 20%ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. (instance={{ $labels.instance }})"
